<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>JavaScript</title>
		
</head>

<body>
    <form name = "form">
        <p>
            <input max="2050-12-12" min="1925-01-01" name="calendar" type="date" value="" onchange="value = this.value">
           
        </p>
    </form>  	

    <div class="wrapper"  style="overflow: hidden;">
                <svg id="tree" xmlns="http://www.w3.org/2000/svg" width="200" height="400"viewBox="0 0 500 1100">
                    <line id="rey12" x1="27.5" y1="37.61" x2="27.5" y2="48.5" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey10" x1="54.99" y1="66" x2="44.5" y2="65.58" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey09" y1="65.5" x2="9.5" y2="65.5" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey08" x1="6.07" y1="53.63" x2="11.97" y2="57.04" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey07" x1="39.78" y1="44.72" x2="35.85" y2="51.54" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey06" x1="15.22" y1="44.72" x2="18.63" y2="50.63" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey05" x1="48.92" y1="53.63" x2="42.28" y2="57.46" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey04" x1="41.94" y1="74.34" x2="48.92" y2="78.37" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey03" x1="35.85" y1="81.1" x2="39.78" y2="88" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey02" x1="18.62" y1="81.37" x2="14.8" y2="88" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <line id="rey01" x1="11.97" y1="74.96" x2="5.63" y2="78.62" style="fill:none;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>

                    <path id="ark" d="M950.51,717.5c-56.53,0-78.22-29.85-100.4-69h200C1022.87,691.54,1006.29,717.5,950.51,717.5Z" transform="translate(-796 -186)" style="fill: red"/> 
                    <path id="ark1" d="M1049.16,649c-26.82,42.44-43.48,68-98.65,68-26,0-45.78-6.17-62.28-19.41C873.7,685.94,862.76,669.72,851,649h198.19m1.59-1H849.25c23.17,41,45.34,70,101.26,70h0c55.36,0,72-25,100.24-69.64V648Z" transform="translate(-796 -186)" style="fill:#0071bc"/>
                    <ellipse id="arkTop" cx="154.3" cy="462" rx="100.5" ry="4" style="fill:#c1272d;stroke:#0071bc;stroke-miterlimit:10;stroke-width:0.75px"/>
                    <text id="arkText" transform="translate(155.19 511.48)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">Ковчег</text>
                    <path id="arkSpot"  d="M962,669.5c0,6.9-5.6,13.5-12.5,13.5a12.5,12.5,0,0,1,0-25C956.4,658,962,662.6,962,669.5Z" transform="translate(-796 -186)" style="fill:#f2f2f2;  opacity:0.30000000000000004"/>
                    <text id="arkNumber" transform="translate(152.82 488.35)" text-anchor="middle"  style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>


                    <polygon id="leftKneltSentiel" points="297.5 408.5 188.5 408.5 297.5 318.5 297.5 408.5" style="fill:#c1272d; stroke:#0071bc;stroke-miterlimit:10"/>
                    <circle id="leftKneltSentielSpot" cx="265.5" cy="371.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="leftKneltSentielNumber" transform="translate(264.82 375.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    <text id="leftKneltSentielText" transform="translate(255.92 397.84)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">ЛКС</text>  

                    <polygon id="rightKneltSentiel" points="13.5 408.5 122.5 408.5 13.5 318.5 13.5 408.5" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <circle id="rightKneltSentielSpot" cx="41.5" cy="371.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="rightKneltSentielNumber" transform="translate(40.82 375.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    <text id="rightKneltSentielText" transform="translate(50.92 397.84)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">ПКС</text>  

                    <rect id="body" x="104.5" y="345.5" width="99" height="99" style="stroke:#0071bc; fill:red"/>
                    <circle id="bodySport" cx="153.5" cy="370.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="bodyText" transform="translate(152.82 374.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    <text id="bodyNumber" transform="translate(153.43 410.63)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">Тело</text>  

                    <circle id="luna" cx="280.5" cy="66.5" r="15" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <path id="lunaShadow" d="M1076.48,267.5l1.32-.9a17,17,0,0,0,7.47-14.55l-.1-3.26a12.1,12.1,0,0,0-8.16-11.14,4.66,4.66,0,0,0-.49-.15h0a15,15,0,0,1,15,15h0A15,15,0,0,1,1076.48,267.5Z" transform="translate(-796 -186)" style="opacity:0.67"/>
                    <polyline id="lunaLink" points="266.88 307.75 313 307.75 313 66.5 295.5 66.5" style="fill:none;stroke:#0071bc;stroke-miterlimit:10"/>
                    <path id="lunaSpot" d="M1089,252.5a12.5,12.5,0,0,1-12.5,12.5c-6.9,0-12.5-6.6-12.5-13.5s5.6-11.5,12.5-11.5A12.5,12.5,0,0,1,1089,252.5Z" transform="translate(-796 -186)" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="lunaNumber" transform="translate(279.82 70.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    <ellipse id="lunaBotton" cx="154.5" cy="314.13" rx="112.5" ry="3.5" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <rect id="lunaBelt" x="42" y="301.37" width="225" height="12.76" style="fill:red"/>
                    <text id="lunaText" transform="translate(152.45 315.69)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">Женский пояс</text>
                    <line id="lunaRightBorder" x1="42" y1="301.21" x2="42" y2="314.13" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <line id="lunaLeftBorder" x1="267" y1="301.21" x2="266.88" y2="313.94" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <ellipse id="lunaTop" cx="154.5" cy="301.37" rx="112.5" ry="3" style="fill:#c1272d;stroke:#0071bc;stroke-miterlimit:10"/>


                    <polygon id="soul" points="129 139 179 139 204 160.83 204 269.17 179 289 129 289 104 268.17 104 159.83 129 139" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <text id="soulText" transform="translate(152.45 216.69)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">Душа</text>
                    <circle id="soulSpot" cx="153.5" cy="178.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="soulNumber" transform="translate(152.82 182.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>

                    <polygon id="leftElbowSentiel" points="295.5 133.5 186.5 133.5 295.5 223.5 295.5 133.5" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <text id="leftElbowSentielText" transform="translate(264.19 173.48)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">ЛЛС</text>  
                    <path id="leftElbowSentielSpot"  d="M1074,338.5a12.5,12.5,0,0,1-12.5,12.5c-6.9,0-12.5-6.6-12.5-13.5s5.6-11.5,12.5-11.5A12.5,12.5,0,0,1,1074,338.5Z" transform="translate(-796 -186)" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="leftElbowSentielNumber" transform="translate(265.82 155.73)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    
                    
                    
                    <polygon id="rightElbowSentiel" points="11.5 133.5 120.5 133.5 11.5 223.5 11.5 133.5" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <text id="rightElbowSentielText" transform="translate(40.45 173.48)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">ПЛС</text> 
                    <circle id="rightElbowSentielSpot" cx="41.5" cy="152.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="rightElbowSentielNumber" transform="translate(39.82 155.73)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>

                    <circle id="sun" cx="27.5" cy="66.5" r="15" style="fill:none;stroke:#0071bc;stroke-miterlimit:10"/>
                    <circle id="sunSpot" cx="27.5" cy="66.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="sunNumber" transform="translate(26.82 70.35)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
                    <polyline id="sunLink" points="27.5 81.5 27.5 114.71 82.31 114.71" style="fill:none;stroke:#0071bc;stroke-miterlimit:10"/>
                    <ellipse id="sunBotton" cx="155.65" cy="121.9" rx="73.35" ry="3.5" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <rect id="sunBelt" x="82.31" y="107.52" width="146.69" height="14.38" style="fill:red"/>
                    <text id="sunText" transform="translate(152.45 121.69)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">Мужской пояс</text>
                    <ellipse id="sunTop" cx="155.65" cy="107.52" rx="73.35" ry="3.5" style="fill:#c1272d;stroke:#0071bc;stroke-miterlimit:10"/>
                    <line id="sunLeftBotder" x1="82.31" y1="107.35" x2="82.31" y2="121.9" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>
                    <line id="sunRightBotder" x1="229" y1="107.35" x2="228.92" y2="121.68" style="fill:red;stroke:#0071bc;stroke-miterlimit:10"/>

                    <circle id="head" cx="153" cy="50" r="49.5" style="fill:red"/>
                    <path d="M949,187a49,49,0,1,1-49,49,49.05,49.05,0,0,1,49-49m0-1h0a50,50,0,0,0-50,50h0a50,50,0,0,0,50,50h0a50,50,0,0,0,50-50h0a50,50,0,0,0-50-50Z" transform="translate(-796 -186)" style="fill:#0071bc"/>
                    <text id="headText" transform="translate(152 55)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">ЛЛС</text> 
                    <circle id="headSpot" cx="154.5" cy="25.5" r="12.5" style="fill:#f2f2f2; opacity:0.3"/>
                    <text id="headNumber" transform="translate(154 29)" text-anchor="middle" style="font-size:12px;font-family:MyriadPro-Regular, Myriad Pro">60</text>
	</svg>
</div>
<script>
    class TreeNo {
    constructor (date) {
        this.date = date;
        this.znak = {
            energy:['#d6d6d6', '#3476da', '#3476da', '#fc9393', '#fc9393', '#ffffa6', '#ffffa6', 'white', 'white', '#d6d6d6'],
            shadow:['#363636', '#0a0a8d', '#0a0a8d', '#7e2828', '#7e2828', '#acac39', '#acac39', '9c9c9c', '9c9c9c', '#363636'],
            zver:['кабан', 'крыса', 'волк', 'тигр', 'кот', 'дракон', 'змея', 'лошадь', 'овца', 'обезьяна', 'птица', 'собака'] 
        };
        this.d = {
          head: this.headCalc(),
          soul: this.soulCalc(),
          body: this.bodyCalc(),
          ark: this.malkhudCalc(),
          sun: this.binahCalc(),
          luna: this.hokmahCalc(),
          rightElbowSentiel: this.gevurahCalc(),
          leftKneltSentiel: this.nezahCalc(),
          leftElbowSentiel: this.hesedCalc(),
          rightKneltSentiel: this.hodCalc() 
        };
    }

headCalc() {
        let x = 48 + (Math.ceil((this.date)/(60*60*24*1000)))%60;             
        if (x <= 0) {x += 60}  else {
              if (x > 60)  {x -= 60}}     
            return x 
    } 
bodyCalc() {
         let x =(47 + (this.date.getFullYear()-1970))%60;  
            if (x <= 0) {x += 60}  else {
            if (x > 60)  {x -= 60}}     
        return x 
    }  
soulCalc(){
    let  x = String(this.bodyCalc(this.date)).slice(-1), y= 0;  
          if (x == '1' || x == '2') {y = this.date.getMonth()+1;} else {
            if (x == '3' || x == '4') {y = this.date.getMonth()+13;} else {
            if (x == '5' || x == '6') {y = this.date.getMonth()+25;} else {
            if (x == '7' || x == '8') {y = this.date.getMonth()+37;} else {
            if (x == '9' || x == '0') {y = this.date.getMonth()+49;}}}}}
            return y 
            }

setEnergy = (a) => {
                a=a%10;
                return this.znak.energy[a];
} 

setShadow = (a) => {
                a=a%10;
                return this.znak.shadow[a];
} 


setZver = (a) => {
         a = a%12;  
    return this.znak.zver[a];
}

malkhudCalc = () => {
    const x = this.headCalc()+this.soulCalc()+this.bodyCalc();
   if (x%60 === 0) {
    return 60
   } else {return x%60}
}

binahCalc = () => {
    const x = this.soulCalc()+this.bodyCalc();
   if (x%60 === 0) {
    return 60
   } else {return x%60}
}

hokmahCalc = () => {
    const x = this.headCalc()+this.soulCalc();
   if (x%60 === 0) {
    return 60
   } else {return x%60}
}
gevurahCalc = () => {
    const x = 4 + this.soulCalc();
   if (x%60 === 0) {
    return 60
   } else {return x%60}
}
nezahCalc = () => {
    const x = 22 + this.soulCalc();
   if (x%60 === 0) {
    return 60
   } else {return x%60}
}
hesedCalc = () => {
    let x = this.soulCalc() - 4;
    if (x<0) {x+=60};
   if (x === 0) {return 60} 
   return x
}
hodCalc = () => {
    let x = this.soulCalc() - 22;
   if (x<0) {x+=60};
   if (x === 0) {return 60} 
   return x
}

defineCharacter = (a) => {
    const e = a.id; 
      document.getElementById(e).style.fill= this.setEnergy(this.d[e]);
      document.getElementById(`${e}Text`).textContent = this.setZver(this.d[e]);
      document.getElementById(`${e}Number`).textContent= this.d[e];
    if (e == 'ark' || e == 'sun' || e =='luna') {
        document.getElementById(`${e}Top`).style.fill= this.setShadow(this.d[e])}
    if (e == 'sun' || e == 'luna') {
        document.getElementById(`${e}Belt`).style.fill= this.setEnergy(this.d[e])
        document.getElementById(`${e}Botton`).style.fill= this.setEnergy(this.d[e]);
    }
}


fillTree = () => {

    this.defineCharacter(head);
    this.defineCharacter(soul);
    this.defineCharacter(body);
    this.defineCharacter(ark);
    this.defineCharacter(sun);
    this.defineCharacter(luna);
    this.defineCharacter(rightElbowSentiel);
    this.defineCharacter(leftElbowSentiel);
    this.defineCharacter(rightKneltSentiel);
    this.defineCharacter(rightKneltSentiel); 
}            


           
    }

let x = new Date();
const a = x.getFullYear(),
      b = x.getMonth(),
      c = x.getDate();  
    

const y = new TreeNo(new Date(a, b, c));     


    document.write(`сегодня: ${c}.${b}.${a}`);

y.fillTree();

form.onchange = function() {
    const setYear = +form.elements.calendar.value.slice(0,4),
          setMonth = +form.elements.calendar.value.slice(5,7) - 1,
          setDay  = +form.elements.calendar.value.slice(8,10);
    const y = new TreeNo(new Date(setYear, setMonth, setDay)); 
    y.fillTree();
    
};

</script>

</body>

